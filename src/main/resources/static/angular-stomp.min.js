"format global";"globals.angular angular";"globals.Stomp stompjs";!function(e){function t(e,t,s){return 4===arguments.length?n.apply(this,arguments):void i(e,{declarative:!0,deps:t,declare:s})}function n(e,t,n,s){i(e,{declarative:!1,deps:t,executingRequire:n,execute:s})}function i(e,t){t.name=e,e in h||(h[e]=t),t.normalizedDeps=t.deps}function s(e,t){if(t[e.groupIndex]=t[e.groupIndex]||[],-1==p.call(t[e.groupIndex],e)){t[e.groupIndex].push(e);for(var n=0,i=e.normalizedDeps.length;i>n;n++){var r=e.normalizedDeps[n],o=h[r];if(o&&!o.evaluated){var u=e.groupIndex+(o.declarative!=e.declarative);if(void 0===o.groupIndex||o.groupIndex<u){if(void 0!==o.groupIndex&&(t[o.groupIndex].splice(p.call(t[o.groupIndex],o),1),0==t[o.groupIndex].length))throw new TypeError("Mixed dependency cycle detected");o.groupIndex=u}s(o,t)}}}}function r(e){var t=h[e];t.groupIndex=0;var n=[];s(t,n);for(var i=!!t.declarative==n.length%2,r=n.length-1;r>=0;r--){for(var o=n[r],c=0;c<o.length;c++){var f=o[c];i?u(f):a(f)}i=!i}}function o(e){return y[e]||(y[e]={name:e,dependencies:[],exports:{},importers:[]})}function u(t){if(!t.module){var n=t.module=o(t.name),i=t.module.exports,s=t.declare.call(e,function(e,t){if(n.locked=!0,"object"==typeof e)for(var s in e)i[s]=e[s];else i[e]=t;for(var r=0,o=n.importers.length;o>r;r++){var u=n.importers[r];if(!u.locked)for(var c=0;c<u.dependencies.length;++c)u.dependencies[c]===n&&u.setters[c](i)}return n.locked=!1,t},t.name);n.setters=s.setters,n.execute=s.execute;for(var r=0,c=t.normalizedDeps.length;c>r;r++){var a,f=t.normalizedDeps[r],l=h[f],p=y[f];p?a=p.exports:l&&!l.declarative?a=l.esModule:l?(u(l),p=l.module,a=p.exports):a=d(f),p&&p.importers?(p.importers.push(n),n.dependencies.push(p)):n.dependencies.push(null),n.setters[r]&&n.setters[r](a)}}}function c(e){var t,n=h[e];if(n)n.declarative?l(e,[]):n.evaluated||a(n),t=n.module.exports;else if(t=d(e),!t)throw new Error("Unable to load dependency "+e+".");return(!n||n.declarative)&&t&&t.__useDefault?t["default"]:t}function a(t){if(!t.module){var n={},i=t.module={exports:n,id:t.name};if(!t.executingRequire)for(var s=0,r=t.normalizedDeps.length;r>s;s++){var o=t.normalizedDeps[s],u=h[o];u&&a(u)}t.evaluated=!0;var l=t.execute.call(e,function(e){for(var n=0,i=t.deps.length;i>n;n++)if(t.deps[n]==e)return c(t.normalizedDeps[n]);throw new TypeError("Module "+e+" not declared as a dependency.")},n,i);l&&(i.exports=l),n=i.exports,n&&n.__esModule?t.esModule=n:t.esModule=f(n)}}function f(t){if(t===e)return t;var n={};if("object"==typeof t||"function"==typeof t)if(v){var i;for(var s in t)(i=Object.getOwnPropertyDescriptor(t,s))&&b(n,s,i)}else{var r=t&&t.hasOwnProperty;for(var s in t)(!r||t.hasOwnProperty(s))&&(n[s]=t[s])}return n["default"]=t,b(n,"__useDefault",{value:!0}),n}function l(t,n){var i=h[t];if(i&&!i.evaluated&&i.declarative){n.push(t);for(var s=0,r=i.normalizedDeps.length;r>s;s++){var o=i.normalizedDeps[s];-1==p.call(n,o)&&(h[o]?l(o,n):d(o))}i.evaluated||(i.evaluated=!0,i.module.execute.call(e))}}function d(e){if($[e])return $[e];if("@node/"==e.substr(0,6))return m(e.substr(6));var t=h[e];if(!t)throw"Module "+e+" not present.";return r(e),l(e,[]),h[e]=void 0,t.declarative&&b(t.module.exports,"__esModule",{value:!0}),$[e]=t.declarative?t.module.exports:t.esModule}var h={},p=Array.prototype.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},v=!0;try{Object.getOwnPropertyDescriptor({a:0},"a")}catch(g){v=!1}var b;!function(){try{Object.defineProperty({},"a",{})&&(b=Object.defineProperty)}catch(e){b=function(e,t,n){try{e[t]=n.value||n.get.call(e)}catch(i){}}}}();var y={},m="undefined"!=typeof System&&System._nodeRequire||"undefined"!=typeof require&&require.resolve&&"undefined"!=typeof process&&require,$={"@empty":{}};return function(e,i,s){return function(r){r(function(r){for(var o={_nodeRequire:m,register:t,registerDynamic:n,get:d,set:function(e,t){$[e]=t},newModule:function(e){return e}},u=0;u<i.length;u++)(function(e,t){t&&t.__esModule?$[e]=t:$[e]=f(t)})(i[u],arguments[u]);s(o);var c=d(e[0]);if(e.length>1)for(var u=1;u<e.length;u++)d(e[u]);return c.__useDefault?c["default"]:c})}}}("undefined"!=typeof self?self:global)(["1"],["9","c"],function(e){!function(){var t=e;if("undefined"!=typeof window&&"undefined"!=typeof document&&window.location)var n=location.protocol+"//"+location.hostname+(location.port?":"+location.port:"");t.set("@@cjs-helpers",t.newModule({getPathVars:function(e){var t,i=e.lastIndexOf("!");t=-1!=i?e.substr(0,i):e;var s=t.split("/");return s.pop(),s=s.join("/"),"file:///"==t.substr(0,8)?(t=t.substr(7),s=s.substr(7),isWindows&&(t=t.substr(1),s=s.substr(1))):n&&t.substr(0,n.length)===n&&(t=t.substr(n.length),s=s.substr(n.length)),{filename:t,dirname:s}}}))}(),e.registerDynamic("2",[],!0,function(e,t,n){var i=this,s=i.define;i.define=void 0;var r=Object;return n.exports={create:r.create,getProto:r.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:r.getOwnPropertyDescriptor,setDesc:r.defineProperty,setDescs:r.defineProperties,getKeys:r.keys,getNames:r.getOwnPropertyNames,getSymbols:r.getOwnPropertySymbols,each:[].forEach},i.define=s,n.exports}),e.registerDynamic("3",["2"],!0,function(e,t,n){var i=this,s=i.define;i.define=void 0;var r=e("2");return n.exports=function(e,t,n){return r.setDesc(e,t,n)},i.define=s,n.exports}),e.registerDynamic("4",["3"],!0,function(e,t,n){var i=this,s=i.define;return i.define=void 0,n.exports={"default":e("3"),__esModule:!0},i.define=s,n.exports}),e.registerDynamic("5",["4"],!0,function(e,t,n){"use strict";var i=this,s=i.define;i.define=void 0;var r=e("4")["default"];return t["default"]=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),t.__esModule=!0,i.define=s,n.exports}),e.registerDynamic("6",[],!0,function(e,t,n){"use strict";var i=this,s=i.define;return i.define=void 0,t["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.__esModule=!0,i.define=s,n.exports}),e.register("7",["5","6"],function(e){var t,n,i;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]}],execute:function(){"use strict";i=function(){function e(t,i){n(this,e),this.ngStomp=t,this.connections=i}return t(e,[{key:"unSubscribeAll",value:function(){var e=this;this.connections.forEach(function(t){return e.$$unSubscribeOf(t)}),this.connections=[]}},{key:"unSubscribeOf",value:function(e){var t=this;this.connections.filter(function(t){return t.queue===e}).forEach(function(e){return t.$$unSubscribeOf(e)}),this.connections=this.connections.filter(function(t){return t.queue!==e})}},{key:"unSubscribeNth",value:function(e){var t=this;this.connections.filter(function(t){return t.index===e}).forEach(function(e){return t.$$unSubscribeOf(e)}),this.connections=this.connections.filter(function(t){return t.index!==e})}},{key:"$$unSubscribeOf",value:function(e){this.ngStomp.$$unSubscribeOf({queue:e.queue,callback:e.callback,header:e.headers,scope:e.scope,digest:e.digest})}}]),e}(),e("default",i)}}}),e.register("8",["5","6","7","9"],function(e){var t,n,i,s,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){i=e["default"]},function(e){s=e["default"]}],execute:function(){"use strict";r=function(){function e(t,i){n(this,e),this.ngStomp=t,this.connections=[],this.subscribeTo(i)}return t(e,[{key:"callback",value:function(e){return this.aCallback=e,this}},{key:"withHeaders",value:function(e){return this.headers=e,this}},{key:"bindTo",value:function(e){return this.scope=e,this}},{key:"withBodyInJson",value:function(){return this.json=!0,this}},{key:"withDigest",value:function(e){return this.digest=e,this}},{key:"build",value:function(){return this.connect()}},{key:"subscribeTo",value:function(e){return this.queue=e,this.aCallback=s.noop,this.headers={},this.scope=void 0,this.json=!1,this.digest=!0,this}},{key:"connect",value:function(){var e=this;return this.and(),this.connections.forEach(function(t){return e.ngStomp.subscribe(t.queue,t.callback,t.headers,t.scope,t.json,t.digest)}),new i(this.ngStomp,this.connections)}},{key:"and",value:function(){return this.connections.push({queue:this.queue,callback:this.aCallback,headers:this.headers,scope:this.scope,json:this.json,digest:this.digest,index:this.connections.length}),this}}]),e}(),e("default",r)}}}),e.register("a",["5","6","8","9"],function(e){var t,n,i,s,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){i=e["default"]},function(e){s=e["default"]}],execute:function(){"use strict";r=function(){function e(t,i,s,r,o,u){n(this,e),this.settings=t,this.$q=i,this.$rootScope=r,this.$log=s,this.Stomp=u,this.$timeout=o,this.connections=[],this.$initConnectionState(),t.autoConnect&&this.connect()}return t(e,[{key:"connect",value:function(){return this.$initConnectionState(),this.$connect()}},{key:"$initConnectionState",value:function(){this.deferred&&this.deferred.reject(),this.deferred=this.$q.defer(),this.connectionState=this.deferred.promise}},{key:"$connect",value:function(){var e=this;this.$setConnection();var t=function(){return e.deferred.resolve()},n=function(){e.deferred.reject(),e.$initConnectionState(),e.settings.timeOut>=0&&e.$timeout(function(){e.$connect(),e.$reconnectAll()},e.settings.timeOut)};return s.isDefined(this.settings.headers)?this.stompClient.connect(this.settings.headers,t,n):this.stompClient.connect(this.settings.login,this.settings.password,t,n,this.settings.vhost),this.connectionState}},{key:"subscribe",value:function(e,t,n,i,s,r){void 0===n&&(n={});var o=this;return void 0===s&&(s=!1),this.connectionState.then(function(){return o.$stompSubscribe(e,t,n,i,s,r)},function(){return o.$$addToConnectionQueue({queue:e,callback:t,header:n,scope:i,json:s,digest:r})}),this}},{key:"subscribeTo",value:function(e){return new i(this,e)}},{key:"unsubscribe",value:function(e){var t=this;return this.connectionState.then(function(){return t.$stompUnSubscribe(e)}),this}},{key:"send",value:function(e,t){var n=this,i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],s=this.$q.defer();return this.connectionState.then(function(){n.stompClient.send(e,i,JSON.stringify(t)),s.resolve()}),s.promise}},{key:"disconnect",value:function(){var e=this.$q.defer();return this.stompClient.disconnect(function(){e.resolve()}),e.promise}},{key:"$stompSubscribe",value:function(e,t,n,i,s,r){void 0===i&&(i=this.$rootScope);var o=this.stompClient.subscribe(e,function(e){s&&(e.body=JSON.parse(e.body)),r?i.$applyAsync(function(){return t(e)}):t(e)},n),u={queue:e,sub:o,callback:t,header:n,scope:i,json:s,digest:r};this.$$addToConnectionQueue(u),this.$unRegisterScopeOnDestroy(u)}},{key:"$stompUnSubscribe",value:function(e){this.connections.filter(function(t){return t.queue===e}).forEach(function(e){return e.sub.unsubscribe()}),this.connections=this.connections.filter(function(t){return t.queue!=e})}},{key:"$setConnection",value:function(){this.stompClient=this.settings["class"]?this.Stomp.over(new this.settings["class"](this.settings.url)):this.Stomp.client(this.settings.url),this.stompClient.debug=this.settings.debug?this.$log.debug:s.noop,s.isDefined(this.settings.heartbeat)&&(this.stompClient.heartbeat.outgoing=this.settings.heartbeat.outgoing,this.stompClient.heartbeat.incoming=this.settings.heartbeat.incoming)}},{key:"$unRegisterScopeOnDestroy",value:function(e){var t=this;void 0!==e.scope&&s.isFunction(e.scope.$on)&&e.scope.$on("$destroy",function(){return t.$$unSubscribeOf(e)})}},{key:"$reconnectAll",value:function(){var e=this,t=this.connections;this.connections=[],t.forEach(function(t){return e.subscribe(t.queue,t.callback,t.header,t.scope,t.json,t.digest)})}},{key:"$$unSubscribeOf",value:function(e){var t=this;this.connections.filter(function(n){return t.$$connectionEquality(n,e)}).forEach(function(e){return e.sub.unsubscribe()}),this.connections=this.connections.filter(function(n){return!t.$$connectionEquality(n,e)})}},{key:"$$addToConnectionQueue",value:function(e){this.connections.push(e)}},{key:"$$connectionEquality",value:function(e,t){return e.queue===t.queue&&e.callback===t.callback&&e.header===t.header&&e.scope===t.scope&&e.digest===t.digest}},{key:"login",set:function(e){this.settings.login=e}},{key:"password",set:function(e){this.settings.password=e}},{key:"url",set:function(e){this.settings.url=e}}]),e}(),e("default",r)}}}),e.register("b",["5","6","a"],function(e){var t,n,i,s;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){i=e["default"]}],execute:function(){"use strict";s=function(){function e(){n(this,e),this.settings={timeOut:5e3,heartbeat:{outgoing:1e4,incoming:1e4},autoConnect:!0}}return t(e,[{key:"credential",value:function(e,t){return this.settings.login=e,this.settings.password=t,this}},{key:"url",value:function(e){return this.settings.url=e,this}},{key:"class",value:function(e){return this.settings["class"]=e,this}},{key:"setting",value:function(e){return this.settings=e,this}},{key:"debug",value:function(e){return this.settings.debug=e,this}},{key:"vhost",value:function(e){return this.settings.vhost=e,this}},{key:"reconnectAfter",value:function(e){return this.settings.timeOut=1e3*e,this}},{key:"heartbeat",value:function(e,t){return this.settings.heartbeat.outgoing=e,this.settings.heartbeat.incoming=t,this}},{key:"autoConnect",value:function(e){return this.settings.autoConnect=e,this}},{key:"headers",value:function(e){return this.settings.headers=e,this}},{key:"$get",value:["$q","$log","$rootScope","$timeout","Stomp",function(e,t,n,s,r){"ngInject";return new i(this.settings,e,t,n,s,r)}]}]),e}(),e("default",s)}}}),e.register("1",["9","c","b"],function(e){"use strict";var t,n,i;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){i=e["default"]}],execute:function(){e("default",t.module("AngularStompDK",[]).provider("ngstomp",i).constant("Stomp",n))}}})})(function(e){e(angular,Stomp)});
//# sourceMappingURL=angular-stomp.min.js.map
